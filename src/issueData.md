# 编号为 15 的 issue 信息获取

### 获取方式

### 获取结果

````json
{
  "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15",
  "repository_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action",
  "labels_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/labels{/name}",
  "comments_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/comments",
  "events_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/events",
  "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/issues/15",
  "id": 1064063139,
  "node_id": "I_kwDOGbveZ84_bFCj",
  "number": 15,
  "title": "【每日打卡】2021-11-26 第17天 【】【】【】",
  "user": {
    "login": "xingorg1",
    "id": 24501131,
    "node_id": "MDQ6VXNlcjI0NTAxMTMx",
    "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xingorg1",
    "html_url": "https://github.com/xingorg1",
    "followers_url": "https://api.github.com/users/xingorg1/followers",
    "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
    "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
    "organizations_url": "https://api.github.com/users/xingorg1/orgs",
    "repos_url": "https://api.github.com/users/xingorg1/repos",
    "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xingorg1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3582509879,
      "node_id": "LA_kwDOGbveZ87ViMM3",
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/documentation",
      "name": "documentation",
      "color": "0075ca",
      "default": true,
      "description": "Improvements or additions to documentation"
    },
    {
      "id": 3582509882,
      "node_id": "LA_kwDOGbveZ87ViMM6",
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/duplicate",
      "name": "duplicate",
      "color": "cfd3d7",
      "default": true,
      "description": "This issue or pull request already exists"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": {
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/milestones/1",
    "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/milestone/1",
    "labels_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/milestones/1/labels",
    "id": 7431423,
    "node_id": "MI_kwDOGbveZ84AcWT_",
    "number": 1,
    "title": "2021",
    "description": null,
    "creator": {
      "login": "xingorg1",
      "id": 24501131,
      "node_id": "MDQ6VXNlcjI0NTAxMTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xingorg1",
      "html_url": "https://github.com/xingorg1",
      "followers_url": "https://api.github.com/users/xingorg1/followers",
      "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
      "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
      "organizations_url": "https://api.github.com/users/xingorg1/orgs",
      "repos_url": "https://api.github.com/users/xingorg1/repos",
      "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xingorg1/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 1,
    "closed_issues": 0,
    "state": "open",
    "created_at": "2021-11-26T03:19:31Z",
    "updated_at": "2021-11-26T03:19:31Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 0,
  "created_at": "2021-11-26T03:14:26Z",
  "updated_at": "2021-11-26T03:19:31Z",
  "closed_at": null,
  "author_association": "OWNER",
  "active_lock_reason": null,
  "body": "**瞄准排行榜的第一名！http://123.56.222.177/**\n## 评论格式 - 示例：\n```txt\n小石头：https://leetcode-cn.com/u/xingorg1/\n练习内容：队列实现\n累计总数：100\n今日增加：1\n```\n",
  "reactions": {
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/timeline",
  "performed_via_github_app": null
}
````

# 编号为 15 的 issue 下的 comments 获取

所有的 comments！！

### 获取方式

```js
// 获取最近一条issue的所有comments
// 示例地址：https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/comments
octokit
  .request('GET /repos/{owner}/{repo}/issues/{issue_number}/comments', {
    owner,
    repo,
    issue_number: 15,
    per_page: 100,
    page: 1,
  })
  .then(res => {
    console.log('所有的comments！！', res && JSON.stringify(res.data))
    if (res && res.data) {
    }
  })
  .catch(err => {
    console.log('所有的comments失败', err)
  })
```

### 获取结果

```json
[
  {
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/comments/979663187",
    "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/issues/15#issuecomment-979663187",
    "issue_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15",
    "id": 979663187,
    "node_id": "IC_kwDOGbveZ846ZHlT",
    "user": {
      "login": "xingorg1",
      "id": 24501131,
      "node_id": "MDQ6VXNlcjI0NTAxMTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xingorg1",
      "html_url": "https://github.com/xingorg1",
      "followers_url": "https://api.github.com/users/xingorg1/followers",
      "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
      "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
      "organizations_url": "https://api.github.com/users/xingorg1/orgs",
      "repos_url": "https://api.github.com/users/xingorg1/repos",
      "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xingorg1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-26T03:34:33Z",
    "updated_at": "2021-11-26T03:34:33Z",
    "author_association": "OWNER",
    "body": "11123",
    "reactions": {
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/comments/979663187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/comments/979663267",
    "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/issues/15#issuecomment-979663267",
    "issue_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15",
    "id": 979663267,
    "node_id": "IC_kwDOGbveZ846ZHmj",
    "user": {
      "login": "xingorg1",
      "id": 24501131,
      "node_id": "MDQ6VXNlcjI0NTAxMTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xingorg1",
      "html_url": "https://github.com/xingorg1",
      "followers_url": "https://api.github.com/users/xingorg1/followers",
      "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
      "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
      "organizations_url": "https://api.github.com/users/xingorg1/orgs",
      "repos_url": "https://api.github.com/users/xingorg1/repos",
      "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xingorg1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-26T03:34:36Z",
    "updated_at": "2021-11-26T03:34:36Z",
    "author_association": "OWNER",
    "body": "2323423",
    "reactions": {
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/comments/979663267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
```

# 最后一条 issue 信息获取

### 获取方式

```js
// 获取最近一条issues
octokit
  .request('GET /repos/{owner}/{repo}/issues', {
    owner,
    repo,
    per_page: 1, // 1条
    page: 1, // 1页
  })
  .then(res => {
    console.log('最近一条issue获取：', res && JSON.stringify(res.data))
  })
  .catch(err => {
    console.log('lastIssues获取失败', err)
  })
```

### 获取结果

````json
[
  {
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15",
    "repository_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action",
    "labels_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/labels{/name}",
    "comments_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/comments",
    "events_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/events",
    "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/issues/15",
    "id": 1064063139,
    "node_id": "I_kwDOGbveZ84_bFCj",
    "number": 15,
    "title": "【每日打卡】2021-11-26 第17天 【】【】【】",
    "user": {
      "login": "xingorg1",
      "id": 24501131,
      "node_id": "MDQ6VXNlcjI0NTAxMTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xingorg1",
      "html_url": "https://github.com/xingorg1",
      "followers_url": "https://api.github.com/users/xingorg1/followers",
      "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
      "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
      "organizations_url": "https://api.github.com/users/xingorg1/orgs",
      "repos_url": "https://api.github.com/users/xingorg1/repos",
      "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xingorg1/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 3582509879,
        "node_id": "LA_kwDOGbveZ87ViMM3",
        "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/documentation",
        "name": "documentation",
        "color": "0075ca",
        "default": true,
        "description": "Improvements or additions to documentation"
      },
      {
        "id": 3582509882,
        "node_id": "LA_kwDOGbveZ87ViMM6",
        "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/duplicate",
        "name": "duplicate",
        "color": "cfd3d7",
        "default": true,
        "description": "This issue or pull request already exists"
      },
      {
        "id": 3582509888,
        "node_id": "LA_kwDOGbveZ87ViMNA",
        "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/good%20first%20issue",
        "name": "good first issue",
        "color": "7057ff",
        "default": true,
        "description": "Good for newcomers"
      },
      {
        "id": 3583664054,
        "node_id": "LA_kwDOGbveZ87Vml-2",
        "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/%E5%B0%8F%E7%9F%B3%E5%A4%B4",
        "name": "小石头",
        "color": "B60205",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/milestones/1",
      "html_url": "https://github.com/xingorg1/leetcode-daily-practice-action/milestone/1",
      "labels_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/milestones/1/labels",
      "id": 7431423,
      "node_id": "MI_kwDOGbveZ84AcWT_",
      "number": 1,
      "title": "2021",
      "description": null,
      "creator": {
        "login": "xingorg1",
        "id": 24501131,
        "node_id": "MDQ6VXNlcjI0NTAxMTMx",
        "avatar_url": "https://avatars.githubusercontent.com/u/24501131?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xingorg1",
        "html_url": "https://github.com/xingorg1",
        "followers_url": "https://api.github.com/users/xingorg1/followers",
        "following_url": "https://api.github.com/users/xingorg1/following{/other_user}",
        "gists_url": "https://api.github.com/users/xingorg1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/xingorg1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xingorg1/subscriptions",
        "organizations_url": "https://api.github.com/users/xingorg1/orgs",
        "repos_url": "https://api.github.com/users/xingorg1/repos",
        "events_url": "https://api.github.com/users/xingorg1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/xingorg1/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 1,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2021-11-26T03:19:31Z",
      "updated_at": "2021-11-26T03:19:31Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 2,
    "created_at": "2021-11-26T03:14:26Z",
    "updated_at": "2021-11-26T06:34:50Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "body": "**瞄准排行榜的第一名！http://123.56.222.177/**\n## 评论格式 - 示例：\n```txt\n小石头：https://leetcode-cn.com/u/xingorg1/\n练习内容：队列实现\n累计总数：100\n今日增加：1\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/issues/15/timeline",
    "performed_via_github_app": null
  }
]
````

# 批量添加 labels

### 获取方式

```js
// 批量添加labels
// octokit.request("GET /repos/{owner}/{repo}/issues/{issue_number}/labels", {})
octokit.rest.issues
  .addLabels({
    owner,
    repo,
    issue_number: 15,
    labels: ['小石头', 'good first issue'],
  })
  .then(res => {
    console.log('批量添加labels！！', JSON.stringify(res))
  })
  .catch(err => {
    console.log('批量添加labels失败', err)
  })
```

### 获取结果

# 迭代所有 issue

```js
// 迭代所有issue https://github.com/octokit/octokit.js#pagination
const iteratorData = octokit.paginate.iterator(
  octokit.rest.issues.listForRepo,
  {
    owner,
    repo,
    per_page: 100, // 最大每页100条
  }
)

// iterate through each response
for await (const { data: issuesData } of iteratorData) {
  for (const issueItem of issuesData) {
    console.log(
      'IssueItem #%d: %s',
      issueItem.number,
      issueItem.title,
      issueItem.labels
    )
    // console.log("【每条issue详细信息】", JSON.stringify(issueItem));
    let labelsData = issueItem.labels.map(label => {
      return label.name
    })
    console.log(labelsData)
  }
}
```

# 获取最近的几条 issue 【GraphGL】

```js
/* // 获取最近的几条issue https://github.com/octokit/octokit.js#graphql-api-queries
const issue_number = 0
octokit.graphql(
  `
    query lastIssues($owner: String!, $repo: String!, $num: Int = 1) {
      repository(owner: $owner, name: $repo) {
        issues(last: $num) {
          edges {
            node {
              title,
              number
            }
          }
        }
      }
    }
  `,
  {
    owner,
    repo,
  }
).then((res) => {
  // {"repository":{"issues":{"edges":[{"node":{"title":"【每日打卡】2021-11-26 第17天 【】【】【】","number":15}}]}}}
  // issue_number = number 拿到id编号
  console.log("lastIssues！！", JSON.stringify(res));
}).catch((err) => {
  console.log('lastIssues获取失败', err);
}) */
```

# 获取所有 comments

```js
/* // 获取所有comments
octokit.request('GET /repos/{owner}/{repo}/issues/comments', {
  owner,
  repo
}).then((res) => {
  console.log("2comments！！", res && JSON.stringify(res.data));
}).catch((err) => {
  console.log('2comments失败', err);
}) */
```

# 获取所有 labels

```js
// 3、获取所有labels
//  /repos/{owner}/{repo}/labels
octokit
  .request('GET /repos/{owner}/{repo}/labels', {
    owner,
    repo,
    per_page: 100,
    page: 1,
  })
  .then(res => {
    console.log('labels成功！！', JSON.stringify(res.data))
    // res.data.map(() => {

    // })
  })
  .catch(err => {
    console.log('labels创建失败', err)
  })
```

labels 成功！！

```json
[
  {
    "id": 3582509879,
    "node_id": "LA_kwDOGbveZ87ViMM3",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/documentation",
    "name": "documentation",
    "color": "0075ca",
    "default": true,
    "description": "Improvements or additions to documentation"
  },
  {
    "id": 3582509882,
    "node_id": "LA_kwDOGbveZ87ViMM6",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/duplicate",
    "name": "duplicate",
    "color": "cfd3d7",
    "default": true,
    "description": "This issue or pull request already exists"
  },
  {
    "id": 3582509884,
    "node_id": "LA_kwDOGbveZ87ViMM8",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/enhancement",
    "name": "enhancement",
    "color": "a2eeef",
    "default": true,
    "description": "New feature or request"
  },
  {
    "id": 3582509888,
    "node_id": "LA_kwDOGbveZ87ViMNA",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/good%20first%20issue",
    "name": "good first issue",
    "color": "7057ff",
    "default": true,
    "description": "Good for newcomers"
  },
  {
    "id": 3582509886,
    "node_id": "LA_kwDOGbveZ87ViMM-",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/help%20wanted",
    "name": "help wanted",
    "color": "008672",
    "default": true,
    "description": "Extra attention is needed"
  },
  {
    "id": 3582509890,
    "node_id": "LA_kwDOGbveZ87ViMNC",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/invalid",
    "name": "invalid",
    "color": "e4e669",
    "default": true,
    "description": "This doesn't seem right"
  },
  {
    "id": 3582509892,
    "node_id": "LA_kwDOGbveZ87ViMNE",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/question",
    "name": "question",
    "color": "d876e3",
    "default": true,
    "description": "Further information is requested"
  },
  {
    "id": 3582509893,
    "node_id": "LA_kwDOGbveZ87ViMNF",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/wontfix",
    "name": "wontfix",
    "color": "ffffff",
    "default": true,
    "description": "This will not be worked on"
  },
  {
    "id": 3583664054,
    "node_id": "LA_kwDOGbveZ87Vml-2",
    "url": "https://api.github.com/repos/xingorg1/leetcode-daily-practice-action/labels/%E5%B0%8F%E7%9F%B3%E5%A4%B4",
    "name": "小石头",
    "color": "B60205",
    "default": false,
    "description": "xingorg1"
  }
]
```
